👉 [R1 交付現狀] 測試環境已上線

嗨！Release 1 的主要功能已經完成並部署到測試環境了,這邊跟你更新一下目前的實作狀況。

R1 核心目標
最初規劃的核心目標是:確保學員能順利完成「登入 → 觀看影片 → 進度自動儲存 → 獲得經驗值 → 自動升級」這個學習流程。

但與你對齊後,確認了最重要的實際交付目標是:「讓購買流程能跑通,讓水球老師在演講時能夠銷售課程」。因此 R1 實際開發方向調整為優先完成購買流程與課程觀看功能。

測試環境 URL
https://waterballiscool.ddns.net/
部署架構:Frontend + Backend + Traefik + PostgresSQL 全部用 Docker Compose 部署在 Linode

帳號註冊方式
目前採用直接註冊制,你可以自己建立帳號來測試。註冊後就可以立即登入使用。
(原規劃是提供測試帳號,但現在改為直接註冊更方便測試)

已完成功能
1. 認證與權限系統
   - Email/Password 登入 (Spring Security + JWT)
   - 三層架構:學員、老師、管理員
   - 資料庫採用 RBAC 設計,已預留多身分組擴充空間

2. 課程購買流程(模擬付款版本)
   - 付費課程顯示「購買課程」按鈕(免費用戶可見)
   - 已購買用戶顯示「開始學習」按鈕
   - 點擊購買後進入購買確認頁面,顯示課程名稱、價格、簡介
   - 點擊確認購買後,前端模擬付款成功流程
   - 購買成功後自動解鎖課程內容,可以立即開始觀看
   - 說明:目前採用模擬付款方案,讓老師在演講時可以展示完整購買流程,未來再串接真實金流

3. 付費/免費權限驗證
   - 免費課程範例:https://waterballiscool.ddns.net/journeys/1 (可直接觀看)
   - 付費課程範例:https://waterballiscool.ddns.net/journeys/2 (需購買後才能觀看)
   - 未付費用戶點擊付費課程單元會跳轉回原頁面

4. 影片觀看與進度追蹤
   - YouTube IFrame API 嵌入播放器
   - 每 10 秒自動儲存觀看進度
   - 完成判定:觀看進度達到 100% 即可交付

5. 單元交付功能
   - 影片看完後可以點擊交付
   - 交付後該單元標記為已完成

6. RWD 響應式設計
   - 桌面版:導航欄 + 固定側邊欄 + 主內容區
   - 手機版:頂部導航欄 + 漢堡選單 (點擊開啟側邊欄抽屜)

7. E2E 自動化測試環境
   - 已建立 Playwright 測試框架
   - 後續開發會持續補上 E2E 測試以符合需求調整

尚未完成功能(原規劃 R1 應完成)
- 經驗值系統與升級機制:應該在交付單元時獲得 200 EXP,達到門檻自動升級
- 斷點續播功能:應該在重新進入課程時自動跳轉到上次觀看位置

已知問題(待修復)

前端問題:
- Breadcrumb 路徑文字有顏色顯示問題
- 未購買用戶點擊付費課程單元會直接導回,缺少「請購買課程」的提示頁面
- 購買按鈕顯示價格為 0 元,應該要正確顯示課程的實際價格
- Navbar 課程選單切換時只會記錄使用者選擇,不會像原網站自動刷新課程單元的渲染頁面

測試建議
你可以先建立一個測試帳號,然後按照這個流程測試:

1. 權限驗證測試
   - 用你的帳號登入
   - 點擊免費課程(Journey 1)確認可以直接觀看
   - 點擊付費課程(Journey 2)確認需要購買才能觀看

2. 購買流程測試
   - 在付費課程頁面點擊購買按鈕
   - 完成購買後確認可以觀看影片

3. 影片觀看與交付測試
   - 播放影片並測試播放控制功能(播放、暫停、進度條、全螢幕)
   - 觀看影片到 100% 進度
   - 點擊交付按鈕,確認該單元標記為已完成

4. 手機版體驗測試
   - 用手機瀏覽器開啟測試環境
   - 檢查漢堡選單、側邊欄抽屜、影片播放器是否正常運作

開發時程說明

Release 1 開發時間比原先預估長,主要原因是在基礎建設投入了較多時間:
- SQL Migration 機制建立
- E2E 測試框架與 Unit Test 環境建置
- Dev / Prod 兩套 Docker Compose 配置
- SQL Schema、Java Model、TypeScript Model 三方一致性確保

雖然初期花了較多時間在這些基礎建設上,但這些投資預計可以在未來需求變動時更快速地交付功能,並且降低維護成本。

如果測試過程中發現任何問題或有其他建議,隨時跟我說!
