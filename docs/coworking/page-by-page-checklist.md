# 水球軟體學院平台 - 逐頁功能與 API 檢查清單

## 檢查狀態圖例
- ✅ 已完成檢查
- 🔄 部分完成
- ❌ 尚未檢查
- ⚠️ 需要特別注意

---

## 1. 首頁 (/) - ✅ 已檢查

### 頁面功能
- ✅ 課程輪播/切換（5 門課程：軟體設計模式精通之旅、AI x BDD、領域驅動設計、軟體設計實戰漫談、工程師下班職涯快速成長攻略）
- ✅ 課程推薦卡片
- ✅ Banner 提示（3000元折價券 - 連結至 /journeys/software-design-pattern/chapters/8/missions/1）
- ✅ 前往挑戰地圖按鈕（頂部導航欄）
- ✅ 課程切換下拉選單（Combobox）
- ✅ 通知鈴鐺圖示
- ✅ 用戶頭像選單
- ✅ 社群連結區塊（Line、Facebook、Discord、Youtube、社群卡片）
- ✅ 技能評級及證書系統介紹（連結至 /skills-intro）
- ✅ 講師介紹區塊（水球潘）
- ✅ 「軟體設計模式之旅課程」推廣區塊
- ✅ 「水球潘的部落格」推廣區塊（連結至 https://blog.waterballsa.tw）
- ✅ 「直接與老師或是其他工程師交流」區塊

### API 端點
| API | 用途 | 狀態 | 備註 |
|-----|------|------|------|
| `GET /api/users/me` | 獲取當前用戶資訊 | ✅ | 用於顯示用戶頭像、等級 |
| `GET /api/journeys/latest` | 獲取所有課程列表 | ✅ | 首頁課程輪播數據源 |
| `GET /api/journey-slug-mapping` | 課程 slug 映射 | ✅ | 用於課程路由 |
| `GET /api/users/me/notifications` | 獲取通知列表 | ✅ | 通知鈴鐺數據 |
| `GET /api/users/me/journey-status` | 獲取用戶課程狀態 | ✅ | 顯示已購買課程 |
| `POST /api/world:renew-token` | 更新登入 Token | ✅ | 保持登入狀態 |

### 用戶流程
1. 訪客進入首頁
2. 瀏覽課程介紹卡片
3. 點擊「立刻體驗」進入課程詳情
4. 或點擊「立刻購買」進入購買流程
5. 已登入用戶看到個人化推薦

### 已補充檢查（2025-11-18 更新）
- ✅ 通知鈴鐺點擊後的彈出視窗內容 - 顯示通知列表，當前用戶無通知時顯示 "Nice - that's all for now. 👏🏽"
- ✅ 用戶頭像選單的下拉選項 - 包含：用戶資訊（名稱、ID、等級、經驗值進度條）、個人檔案、切換主題、邀請好友、登出

### 遺漏檢查
- ❌ Banner 的關閉/最小化功能
- ❌ 課程卡片的「立刻購買」按鈕實際行為

---

## 2. 登入頁 (/sign-in) - ✅ 已檢查

### 頁面功能
- ✅ Google OAuth 登入按鈕
- ✅ Facebook OAuth 登入按鈕
- ✅ 登入後重定向邏輯（使用 localStorage.loginCallbackUrl）
- ⚠️ 登入失敗錯誤提示（需實際測試失敗情境）
- ✅ WebView 環境檢測（行動裝置瀏覽器）

### API 端點
| API | 用途 | 狀態 | 備註 |
|-----|------|------|------|
| `GET /api/world/enter?provider=google` | Google OAuth 登入端點 | ✅ | 透過 world.getEnterUrl() 動態生成 |
| `GET /api/world/enter?provider=facebook` | Facebook OAuth 登入端點 | ✅ | 透過 world.getEnterUrl() 動態生成 |
| `GET /api/users/me` | 獲取當前用戶資訊 | ✅ | 登入後驗證身份 |
| `GET /api/users/me/notifications` | 獲取通知列表 | ✅ | 登入後載入 |
| `GET /api/users/me/journey-status` | 獲取課程訂單狀態 | ✅ | 登入後載入 |
| `POST /api/world:renew-token` | 更新認證 Token | ✅ | 保持登入狀態 |
| `GET /api/journeys/latest` | 獲取課程列表 | ✅ | 頁面初始化時載入 |

### 技術實作細節
- 前端框架：Next.js with form action
- OAuth 端點：動態通過 `world.getEnterUrl(provider)` 生成
- 回調機制：localStorage 存儲 `loginCallbackUrl` 查詢參數
- 按鈕類型：submit button with formAction="/sign-in"
- 追蹤工具：Google Analytics, Facebook Pixel, Microsoft Clarity

### 用戶流程
1. 未登入用戶訪問需要登入的頁面
2. 自動重定向到登入頁，URL 帶有 `?callback=原頁面路徑`
3. 回調 URL 存儲至 localStorage
4. 選擇 Google 或 Facebook 登入
5. 重定向到 `/api/world/enter?provider={google|facebook}`
6. OAuth 授權完成後回調到平台
7. 後端生成 JWT Token 並設置 Cookie
8. 前端讀取 localStorage.loginCallbackUrl 並重定向
9. 載入用戶資訊、通知、課程狀態

### 遺漏檢查
- ⚠️ OAuth 回調的完整 URL 和參數（需攔截實際登入流程）
- ⚠️ JWT Token 具體格式與 Cookie 屬性（httpOnly, secure, sameSite）
- ⚠️ Token 刷新機制的觸發條件
- ⚠️ 登入失敗的錯誤處理與訊息顯示

---

## 3. 課程列表頁 (/courses) - ✅ 已檢查

### 頁面功能
- ✅ 課程卡片列表（**5 門課程**：軟體設計模式、AI x BDD、領域驅動設計、軟體設計實戰漫談、工程師下班職涯快速成長攻略）
- ✅ 課程封面圖片（存放於 /world/courses/ 目錄）
- ✅ 課程名稱、講師（水球潘）、簡介
- ✅ 「試聽課程」按鈕（部分課程可試聽）
- ✅ 「立刻購買」按鈕
- ✅ 「僅限付費」按鈕（部分課程）
- ✅ 課程擁有狀態顯示（「尚未擁有」標籤）
- ✅ 折扣券提示（「你有一張 3,000 折價券」）
- ✅ 訂單紀錄區塊（「目前沒有訂單記錄」）
- ✅ 頂部課程切換下拉選單
- ✅ 「前往挑戰地圖」按鈕
- ✅ 側邊欄導航（首頁、課程、個人檔案、排行榜、獎勵任務、挑戰歷程等）

### API 端點
| API | 用途 | 狀態 | 備註 |
|-----|------|------|------|
| `GET /api/journeys/latest?page=0&items=100` | 獲取課程列表 | ✅ | 支援分頁 page, items 參數 |
| `GET /api/journey-slug-mapping` | 課程 slug 映射 | ✅ | 用於路由轉換 |
| `GET /api/users/me` | 獲取當前用戶資訊 | ✅ | 確認登入狀態 |
| `GET /api/users/me/notifications` | 獲取通知列表 | ✅ | 通知鈴鐺數據 |
| `GET /api/users/me/journey-status` | 獲取用戶課程訂單狀態 | ✅ | 顯示「尚未擁有」或已購買、訂單記錄 |
| `GET /api/users/me/journeys/gyms/challenges/records` | 獲取道館挑戰記錄 | ✅ | 頁面初始化時載入（2次請求） |
| `POST /api/world:renew-token` | 更新認證 Token | ✅ | 保持登入狀態 |

### 技術實作細節
- 課程封面存儲在 `/world/courses/` 目錄
- 頁面預載入多個路由的 JavaScript chunks (profile, portfolio, leaderboard, missions, roadmap, sop)
- 使用 RxJS combineLatest 管理用戶認證狀態
- 課程狀態計算：`userAuthenticated`, `journeysLength`, `userId`
- 權限檢查：`userPermissions` 決定課程可見性

### 用戶流程
1. 進入課程列表頁 `/courses`
2. 頁面載入所有課程資料（`/api/journeys/latest` 返回 5 門課程）
3. 載入用戶購買狀態（`/api/users/me/journey-status`）
4. 顯示課程卡片，標註「尚未擁有」狀態
5. 顯示折扣券提示（如有）
6. 用戶點擊「試聽課程」→ 進入課程詳情頁
7. 用戶點擊「立刻購買」→ 進入購買流程（未實作檢查）
8. 用戶點擊課程卡片 → 進入課程詳情頁
9. 用戶點擊「前往挑戰地圖」→ 進入地圖頁
10. 訂單記錄區塊顯示購買歷史（目前空白）

### 遺漏檢查
- ⚠️ 課程篩選功能（未發現）
- ⚠️ 課程排序功能（未發現）
- ⚠️ 課程搜尋功能（未發現）
- ⚠️ 課程價格顯示（未在列表頁顯示）
- ⚠️ 「立刻購買」按鈕的實際行為（需點擊測試）
- ⚠️ 折扣券的領取與使用邏輯

---

## 4. 課程詳情頁 (/journeys/[slug]) - 🔄 部分檢查

### 頁面功能
- ✅ 課程標題、講師、簡介
- ✅ 課程章節手風琴選單
- ✅ 課程單元列表
- ✅ 道館列表
- ✅ 影片數量、實戰題數量
- ✅ 立即加入課程按鈕
- ✅ 預約 1v1 諮詢按鈕
- ❌ 課程進度條
- ❌ 已完成單元標記
- ❌ 課程證書預覽

### 檢查建議
- ⚠️ **建議檢查其他 4 門課程的詳情頁**：
  - /journeys/ai-bdd（AI x BDD：規格驅動全自動開發術）
  - /journeys/ddd（領域驅動設計）
  - /journeys/software-design-talk（軟體設計實戰漫談）
  - /journeys/software-career（工程師下班職涯快速成長攻略）

### API 端點
| API | 用途 | 狀態 | 備註 |
|-----|------|------|------|
| `GET /api/journeys/{id}` | 獲取課程詳情 | ✅ | 包含 chapters, lessons, gyms |
| `GET /api/users/me/learning-progress` | 獲取學習進度 | ❌ | 需要檢查 |
| `GET /api/journeys/{id}/gym-badges` | 獲取道館徽章 | ✅ | - |

### 用戶流程
1. 進入課程詳情頁
2. 展開章節查看單元列表
3. 點擊單元進入學習頁面
4. 或點擊道館進入挑戰頁面

### 遺漏檢查
- ❌ 章節密碼保護功能
- ❌ 課程內容預覽（試看）
- ❌ 課程評價系統
- ❌ 課程完成獎勵說明

---

## 5. 課程單元頁 (/journeys/[slug]/chapters/[chapterId]/missions/[lessonId]) - ✅ 已檢查

### 頁面功能
- ✅ HLS 影片播放器（支援響應式自適應串流）
- ✅ 課程標題顯示（例：「課程介紹:這門課手把手帶你成為架構設計的高手」）
- ✅ 影片控制列（播放、暫停、音量、全螢幕）
- ✅ 章節導航側邊欄（左側）
- ✅ 上一個/下一個單元導航按鈕
- ✅ Banner 提示（3000元折價券）
- ⚠️ 文章內容渲染（未在此測試頁面確認，type="scroll" 單元）
- ⚠️ Google Form 嵌入（未在此測試頁面確認，type="google-form" 單元）
- ❌ 筆記功能（未發現）
- ❌ 提問/討論區（未發現）

### API 端點
| API | 用途 | 狀態 | 備註 |
|-----|------|------|------|
| `GET /api/journeys/{id}` | 獲取課程詳情 | ✅ | 包含章節和單元資訊 |
| `GET /api/journeys/{id}/chapters/{chapterId}/lessons/{lessonId}` | 獲取特定單元詳情 | ✅ | - |
| `GET /api/users/me/journeys/lessons/progresses` | 獲取所有課程進度 | ✅ | - |
| `GET cdn.waterballsa.tw/.../videos/{videoId}/{videoId}.m3u8` | HLS 影片串流清單 | ✅ | CDN 影片資源 |
| `GET cdn.waterballsa.tw/.../videos/{videoId}/{videoId}-*.ts` | HLS 影片分段 | ✅ | 影片串流片段 |
| `POST /api/missions/{id}/progress` | 更新觀看進度 | ⚠️ | 推測存在（未捕獲） |
| `POST /api/missions/{id}/deliver` | 完成單元 | ⚠️ | 推測存在（未捕獲） |
| `GET /api/missions/{id}/notes` | 獲取筆記 | ❌ | 未發現 |
| `POST /api/missions/{id}/notes` | 新增筆記 | ❌ | 未發現 |

### 技術實作細節
- 使用 HLS (HTTP Live Streaming) 協議
- 影片存放於 CDN：`cdn.waterballsa.tw`
- 支援自適應位元率串流
- 測試頁面：`/journeys/software-design-pattern/chapters/8/missions/1`（免費試聽單元）

### 用戶流程
1. 從課程詳情頁進入課程單元頁
2. 影片透過 HLS 自動載入
3. 用戶觀看影片內容
4. 進度透過 API 追蹤（自動或手動）
5. 可透過側邊欄或導航按鈕前往下一單元

### 付費限制說明
- ✅ 測試的單元為**免費試聽課程**（Chapter 8, Mission 1）
- ⚠️ 其他單元可能需要購買課程才能觀看
- 課程類型標記：`premiumOnly: true/false` (在 API 回應中)

### 遺漏檢查
- ❌ 影片播放速度控制（UI 上未發現，需進一步測試）
- ❌ 影片字幕開關（未發現）
- ❌ 文章類型單元的目錄導航
- ❌ 程式碼區塊複製功能
- ❌ 完成單元按鈕的實際行為

---

## 6. 獎勵任務頁 (/journeys/[slug]/missions) - ✅ 已檢查

### 頁面功能
- ✅ 任務卡片網格佈局
- ✅ 三個分頁標籤：
  - 「可接任務」（Available Missions）
  - 「進行中的任務」（In Progress）
  - 「過去的任務」（Completed）
- ✅ 任務卡片資訊顯示：
  - 任務圖示和名稱（例：「新手任務一」、「白段任務一」）
  - 解鎖條件（Unlock Conditions）
  - 時間限制（例：21 天、30 天）
  - 獎勵內容（例：500 經驗值、延長期限 30 天）
  - 接受/狀態按鈕
- ✅ Banner 提示（3000元折價券）

### 任務範例
1. **新手任務一** - 時限：21 天，獎勵：500 經驗值，狀態：可接受（接受任務按鈕）
2. **新手任務二** - 解鎖條件：完成新手任務一，時限：30 天
3. **白段任務一** - 解鎖條件：通過道館 1，時限：30 天
4. **白段任務二** - 解鎖條件：通過道館 3
5. **白段任務三** - 解鎖條件：通過道館 4
6. **黑段任務一** - 解鎖條件：完成白段任務三

### API 端點
| API | 用途 | 狀態 | 備註 |
|-----|------|------|------|
| `GET /api/journeys/{id}` | 獲取課程詳情（包含任務） | ✅ | - |
| `GET /api/users/me/items` | 獲取用戶物品/獎勵 | ✅ | - |
| `GET /api/users/{userId}/journeys/missions/progresses` | 獲取用戶任務進度 | ✅ | - |
| `POST /api/missions/{id}/accept` | 接受任務 | ⚠️ | 推測存在（未測試） |
| `POST /api/missions/{id}/claim-reward` | 領取任務獎勵 | ⚠️ | 推測存在（未測試） |

### 任務系統設計
- **任務鏈結構**：任務之間存在依賴關係（需完成前置任務才能解鎖）
- **段位系統**：新手任務 → 白段任務 → 黑段任務
- **獎勵類型**：
  - 經驗值（例：500 經驗值）
  - 訂閱延長（例：延長期限 30 天）
- **時間限制**：每個任務有完成時限（21-30 天不等）

### 用戶流程
1. 進入獎勵任務頁 `/journeys/[slug]/missions`
2. 在「可接任務」標籤查看可用任務
3. 檢查解鎖條件和獎勵內容
4. 點擊「接受任務」按鈕接受任務
5. 任務移至「進行中的任務」標籤
6. 完成任務條件後領取獎勵
7. 已完成任務移至「過去的任務」標籤

### 遺漏檢查
- ❌ 任務詳細說明內容（需點擊任務卡片查看）
- ❌ 任務進度追蹤機制
- ❌ 領取獎勵的實際流程
- ❌ 任務失敗/過期處理

---

## 7. 挑戰地圖頁 (/journeys/[slug]/roadmap) - ✅ 已檢查

### 頁面功能
- ✅ 頁面標題：「軟體設計模式精通之旅 - 挑戰地圖」
- ✅ 進度統計顯示：
  - "0 days left"（剩餘天數）
  - "0/20 cleared"（已通過道館數/總道館數）
  - "0 XP"（獲得經驗值）
- ✅ 兩個分頁標籤：
  - 「主線」（Main Quest）
  - 「支線」（Side Quest）
- ✅ 道館列表（順序顯示）
- ✅ 道館資訊顯示：
  - 編號（1-10）
  - 道館名稱
  - 難度等級（★ 到 ★★★★）
  - 鎖定/解鎖狀態圖示
- ✅ 段位分類：
  - **白段道館**（Gym 1-5）
  - **黑段道館**（Gym 6-10）

### 道館列表詳情

#### 白段道館 (White Belt Gyms):
1. **Gym 1**: 行雲流水的設計底層思路 ★
2. **Gym 2**: Christopher Alexander：設計模式 ★
3. **Gym 3**: 掌握「樣板方法」：最基礎的控制反轉 ★★
4. **Gym 4**: 複雜行為實戰演練：Big 2 ★★
5. **Gym 5**: 多重設計難題解決實戰演練：RPG ★★★

#### 黑段道館 (Black Belt Gyms):
6. **Gym 6**: 基礎架構思維、模式及邊界劃分 ★★
7. **Gym 7**: 透過複雜結構來組合行為：裝飾者模式 ★
8. **Gym 8**: 高級複雜框架實戰：有限狀態機框架 ★★★★
9. **Gym 9**: 劃破一切的「生命週期」約束 ★★
10. **Gym 10**: 期末專案 (Web Framework) ★★★★

### API 端點
| API | 用途 | 狀態 | 備註 |
|-----|------|------|------|
| `GET /api/journeys/{id}` | 獲取課程詳情（含道館資訊） | ✅ | - |
| `GET /api/journeys/{id}/gym-badges` | 獲取道館徽章 | ✅ | - |
| `GET /api/users/me/journeys/gyms/challenges/records` | 用戶挑戰記錄 | ✅ | - |

### 難度評級系統
- ★ = 難度 1（基礎）
- ★★ = 難度 2（中等）
- ★★★ = 難度 3（困難）
- ★★★★ = 難度 4（非常困難）

### 用戶流程
1. 進入挑戰地圖頁 `/journeys/[slug]/roadmap`
2. 查看整體進度統計（剩餘天數、已通過道館數、獲得經驗值）
3. 瀏覽道館列表，查看難度等級
4. 點擊道館進入挑戰頁面
5. 完成挑戰後更新進度統計

### 視覺特色
- 編號序列顯示（1-10）
- 鎖定圖示標示未解鎖道館
- 難度星級視覺化
- 白段/黑段分類標示

### 遺漏檢查
- ❌ 地圖視覺化圖形（目前為列表形式，非地圖視圖）
- ❌ 道館連線路徑動畫
- ❌ 道館解鎖條件的詳細顯示
- ❌ 地圖縮放功能（目前為固定列表）
- ❌ 道館徽章的視覺化展示

---

## 8. SOP 寶典頁 (/journeys/[slug]/sop) - 🔒 需要付費購買課程

### 頁面功能
- 🔒 **所有功能需要付費** - 頁面顯示：「您無法觀看『SOP 寶典』」
- 🔒 提示訊息：「這是購買『軟體設計模式精通之旅』之後才能享有的內容。」
- ✅ 鎖定內容通知 Banner

### 付費狀態說明
- ❌ **此功能為付費課程專屬內容**
- ✅ 需要購買「軟體設計模式精通之旅」課程才能解鎖
- ✅ 訪問控制已實施（Access Control）

### API 端點
| API | 用途 | 狀態 | 備註 |
|-----|------|------|------|
| 標準頁面載入 API | 頁面初始化 | ✅ | 僅載入訪問拒絕訊息 |
| `GET /api/journeys/{id}/sop` | 獲取 SOP 列表 | 🔒 | **需要付費才能調用** |
| `GET /api/sop/{id}` | 獲取 SOP 詳情 | 🔒 | **需要付費才能調用** |

### 預期功能（購買後可用）
基於頁面名稱「SOP 寶典」或「Prompt 寶典」推測：
- SOP 文檔列表
- SOP 分類/標籤系統
- SOP 搜尋功能
- SOP 內容預覽
- Prompt 模板複製功能
- 可能的收藏、評分、筆記功能

### 用戶流程
1. 未付費用戶進入 SOP 寶典頁
2. 看到訪問拒絕訊息
3. 需要購買課程才能訪問內容

### 術語說明
- 部分頁面顯示為「**SOP 寶典**」
- 部分頁面可能顯示為「**Prompt 寶典**」
- 需要確認官方統一術語

### 無法檢查的功能（需付費）
- ❌ SOP 文檔內容
- ❌ SOP 分類系統
- ❌ SOP 搜尋功能
- ❌ Prompt 模板複製
- ❌ SOP 收藏功能
- ❌ SOP 評分功能
- ❌ 個人 SOP 筆記
- ❌ SOP 分享功能

**註**：此頁面所有功能均需付費購買課程才能檢查和使用。

---

## 9. 道館挑戰頁 (/journeys/[slug]/chapters/[chapterId]/gyms/[gymId]) - ⚠️ 可從挑戰地圖訪問

### 頁面功能
- ⚠️ 從挑戰地圖可點擊進入道館頁面
- ⚠️ 預期功能（基於系統設計推測）：
  - 道館介紹與挑戰要求說明
  - 作業提交表單
  - GitHub repository 連結輸入
  - 作業說明文檔
  - 參考資源連結
  - 提交歷史記錄
  - Code Review 審核反饋顯示

### API 端點
| API | 用途 | 狀態 | 備註 |
|-----|------|------|------|
| `GET /api/users/me/journeys/gyms/challenges/records` | 獲取用戶道館挑戰記錄 | ✅ | 已確認 |
| `GET /api/journeys/{id}/gym-badges` | 獲取道館徽章 | ✅ | 已確認 |
| `GET /api/gyms/{id}` | 獲取道館詳情 | ⚠️ | 推測存在（未直接測試） |
| `POST /api/gyms/{id}/submissions` | 提交作業 | ⚠️ | 推測存在（未直接測試） |
| `GET /api/gyms/{id}/submissions/me` | 獲取我的提交記錄 | ⚠️ | 推測存在（未直接測試） |
| `GET /api/gyms/{id}/submissions/{submissionId}` | 獲取提交詳情 | ⚠️ | 推測存在（未直接測試） |

### 預期用戶流程
1. 從挑戰地圖點擊道館進入挑戰頁
2. 閱讀道館挑戰要求與說明
3. 完成程式作業
4. 提交 GitHub repository 連結
5. 等待講師 Code Review
6. 查看審核反饋與評分
7. 通過後獲得道館徽章

### 段位系統
- **白段道館** (Gym 1-5)：基礎設計模式挑戰
- **黑段道館** (Gym 6-10)：進階架構設計挑戰

### 檢查狀態說明
- ✅ 道館資訊已在挑戰地圖頁確認（10 個道館，難度 1-4 星）
- ⚠️ 道館詳細頁面未直接測試（可從挑戰地圖訪問）
- ⚠️ 提交與審核流程未實際測試

### 測試建議
- ⚠️ **建議直接測試個別道館頁面**：
  - 從挑戰地圖 (/journeys/[slug]/roadmap) 點擊道館進入
  - 測試至少 1 個白段道館（例：Gym 1）
  - 測試至少 1 個黑段道館（例：Gym 6）
  - 確認作業提交表單功能
  - 確認審核反饋顯示機制

### 未直接測試的功能
- ❌ 道館挑戰詳細說明內容
- ❌ 作業提交表單實際操作
- ❌ 作業重新提交功能
- ❌ Code Review 審核狀態通知
- ❌ 作業範例參考資源
- ❌ 其他學員作品展示
- ❌ 道館徽章獲得動畫/效果

**註**：此頁面可從 `/journeys/[slug]/roadmap` 點擊道館進入，但未在本次檢查中直接測試個別道館頁面。

---

## 10. 個人檔案頁 (/users/me/profile) - 🔄 部分檢查

### 頁面功能
- ✅ 用戶頭像、暱稱、ID
- ✅ 等級與經驗值進度條
- ✅ 職業顯示
- ✅ 標籤切換（基本資料、道館徽章、技能評級、證書）
- ❌ 編輯資料按鈕
- ❌ 突破道館數量
- ❌ 技能雷達圖
- ❌ 證書列表

### API 端點
| API | 用途 | 狀態 | 備註 |
|-----|------|------|------|
| `GET /api/users/me` | 獲取當前用戶 | ✅ | - |
| `GET /api/users/{id}/profile` | 獲取用戶檔案 | ⚠️ | 返回 404，可能未實作 |
| `PUT /api/users/me/profile` | 更新個人資料 | ❌ | 需要檢查 |
| `GET /api/users/me/skills` | 獲取技能評級 | ❌ | 需要檢查 |
| `GET /api/users/me/certificates` | 獲取證書列表 | ❌ | 需要檢查 |

### 用戶流程
1. 進入個人檔案頁
2. 查看個人資料
3. 切換標籤查看道館徽章、技能、證書
4. 點擊編輯更新資料

### 遺漏檢查
- ❌ 頭像上傳功能
- ❌ 暱稱修改功能
- ❌ 職業選擇功能
- ❌ 隱私設定選項

---

## 11. 挑戰歷程頁 (/users/me/portfolio) - ✅ 已檢查

### 頁面功能
- ✅ 用戶個人資料顯示：
  - 頭像圖片
  - 姓名："Liao Ender"
  - 分享按鈕："分享挑戰歷程"
- ✅ **六項技能評級指標**（全部顯示 F- 等級）：
  1. 需求結構化分析 (F-)
  2. 區分結構與行為 (F-)
  3. 抽象/萃取能力 (F-)
  4. 建立 Well-Defined Context (F-)
  5. 熟悉設計模式的 Form (F-)
  6. 游刃有餘的開發能力 (F-)
- ✅ 挑戰歷史區塊：「暫無挑戰紀錄」

### 技能評級系統
- **評分標準**：F- 到（推測）A+ 等級
- **評估方式**：透過與講師進行 Code Review 評估
- **當前用戶狀態**：所有技能顯示 F-（初學者等級）

### API 端點
| API | 用途 | 狀態 | 備註 |
|-----|------|------|------|
| 標準用戶與課程 API | 頁面初始化 | ✅ | - |
| `GET /api/users/{id}/portfolio` | 獲取用戶作品集 | ⚠️ | 返回 404（可能未實作或需特定權限） |
| 道館挑戰記錄 API | 填充挑戰歷史 | ✅ | 從現有 API 獲取 |

### 用戶流程
1. 進入挑戰歷程頁 `/users/me/portfolio`
2. 查看個人技能評級（6 項指標）
3. 檢視挑戰歷史記錄（當前用戶無記錄）
4. 點擊「分享挑戰歷程」分享個人成就

### 技能評級詳細說明
根據 /skills-intro 頁面說明，技能評級透過以下方式進行：
1. **線上 Code Review** - 與講師進行 20+ 場次的 Code Review
2. **初始評估** - 講師識別弱點領域
3. **持續成長** - 追蹤改進進度
4. **反饋改進** - 記錄反饋與改進歷程

### 分享功能
- ✅ 「分享挑戰歷程」按鈕存在
- ❌ 分享功能實際行為未測試

### 遺漏檢查
- ❌ 挑戰歷史的詳細內容（當前用戶無記錄）
- ❌ 道館徽章的視覺化展示
- ❌ 學習時間軸圖表
- ❌ 作品集編輯功能
- ❌ 作品集公開/私密設定
- ❌ 分享連結生成機制
- ❌ 學習數據導出功能

**註**：當前測試用戶尚未完成任何挑戰，因此挑戰歷史區塊為空。技能評級均顯示最低等級 F-。

---

## 12. 排行榜頁 (/leaderboard) - ✅ 已檢查

### 頁面功能
- ✅ 學習排行榜列表
- ✅ 本週成長榜切換
- ✅ 用戶排名顯示
- ✅ 用戶頭像、暱稱、職業
- ✅ 等級與經驗值
- ❌ 我的排名高亮顯示
- ❌ 分頁載入更多

### API 端點
| API | 用途 | 狀態 | 備註 |
|-----|------|------|------|
| `GET /api/users/leaderboard` | 獲取排行榜 | ✅ | 支援分頁 |
| `GET /api/users/leaderboard/me` | 獲取我的排名 | ✅ | - |
| `GET /api/users/leaderboard/weekly-growth` | 本週成長榜 | ❌ | 需要檢查 |

### 用戶流程
1. 進入排行榜頁
2. 查看學習排行榜
3. 切換到本週成長榜
4. 查看自己的排名位置

### 遺漏檢查
- ❌ 排行榜篩選（按課程、按時間）
- ❌ 排行榜更新頻率說明
- ❌ 點擊用戶查看檔案功能

---

## 13. 技能評級及證書系統介紹頁 (/skills-intro) - ✅ 已檢查

### 頁面性質
- ✅ **公開頁面**（無需登入即可訪問）
- ✅ 教育與行銷性質的靜態內容頁面

### 頁面功能
- ✅ **Hero 區塊**：
  - 標題：「技能評級系統」
  - 說明：「透過實際的互動和挑戰,精準評估您的軟體架構師技能,為您量身打造專業建議,引領您突破成長。」
  - CTA 按鈕：「了解更多」

- ✅ **技能指標區塊**（詳細說明 6 項技能）：
  1. 需求結構化分析
  2. 區分結構、行為及侷限
  3. 抽象/萃取能力
  4. 建立 Well-Defined Context
  5. 熟悉設計模式的 Form
  6. 遊刃有餘的開發能力

- ✅ **評估流程區塊**（4 步驟）：
  1. **線上 Code Review** - 20+ 場次與講師互動
  2. **初始評估** - 講師識別弱點領域
  3. **持續成長** - 追蹤改進進度
  4. **反饋改進** - 記錄反饋與改進歷程

- ✅ **CTA 區塊**：
  - 標題：「準備好要成為硬核的 Coding 高手了嗎?」
  - 按鈕：「立即預約線上諮詢」
  - 說明：「線上諮詢時間安排非常彈性,十五分鐘內就結束。」

### API 端點
| API | 用途 | 狀態 | 備註 |
|-----|------|------|------|
| 無 | 靜態內容頁面 | ✅ | 不需要 API 調用 |

### 用戶流程
1. 從首頁「技能評級及證書系統」區塊點擊「了解更多」
2. 進入 /skills-intro 頁面
3. 了解技能評級系統運作方式
4. 了解評估流程（Code Review 機制）
5. 點擊「立即預約線上諮詢」進行報名諮詢
6. 購買課程後開始接受技能評級

### 與其他頁面的關聯
- 首頁有「技能評級及證書系統」推廣區塊，連結到此頁面
- 個人檔案頁（/users/me/profile）展示技能評級結果
- 挑戰歷程頁（/users/me/portfolio）顯示 6 項技能的評分

### 遺漏檢查
- ❌ 「立即預約線上諮詢」按鈕的實際行為（表單/連結/跳轉）
- ❌ 諮詢預約流程
- ❌ 技能評級的收費方式說明

**註**：此頁面為靜態介紹頁面，主要用於教育用戶了解技能評級系統的運作方式。

---

## 14. 頂部導航欄 - ✅ 已完整檢查

### 頁面功能
- ✅ Logo 連結回首頁
- ✅ 課程切換下拉選單（Combobox，顯示當前課程名稱）
- ✅ 「前往挑戰地圖」按鈕
- ✅ 通知鈴鐺圖示
- ✅ 用戶頭像選單
- ✅ **通知列表彈窗** - 標題「Notifications」，分類「Unread」，空狀態訊息："Nice - that's all for now. 👏🏽"
- ✅ **用戶頭像下拉選單內容**：
  - 用戶資訊：「Liao Ender #3080」
  - 等級進度：「Lv. 1 (0/200)」+ 進度條
  - 個人檔案（Personal Profile）
  - 切換主題（Theme Toggle）
  - 邀請好友（Invite Friends）
  - 登出（Logout）

### API 端點
| API | 用途 | 狀態 | 備註 |
|-----|------|------|------|
| `GET /api/users/me` | 獲取用戶資訊 | ✅ | 顯示於下拉選單 |
| `GET /api/users/me/notifications` | 獲取通知 | ✅ | - |
| `PUT /api/notifications/{id}/read` | 標記已讀 | ⚠️ | 推測存在（未測試） |
| `DELETE /api/notifications/{id}` | 刪除通知 | ⚠️ | 推測存在（未測試） |

### 用戶流程
1. 點擊通知鈴鐺查看通知列表
2. 查看未讀通知（當前測試用戶無通知）
3. 點擊通知進入相關頁面（如有通知）
4. 點擊用戶頭像打開下拉選單
5. 查看個人資訊（等級、經驗值進度）
6. 選擇功能：
   - 進入個人檔案
   - 切換主題（深色/淺色模式）
   - 邀請好友
   - 登出系統

### 通知系統
- **空狀態訊息**："Nice - that's all for now. 👏🏽"
- **分類**：「Unread」（未讀）
- **通知類型**（推測）：
  - 系統通知
  - 課程通知
  - 道館審核通知
  - 任務完成通知

### 遺漏檢查
- ❌ 通知點擊後的跳轉邏輯（無通知可測試）
- ❌ 通知已讀/未讀狀態切換
- ❌ 刪除通知功能
- ❌ 「邀請好友」功能實際行為
- ❌ 主題切換的實際效果

---

## 15. 側邊欄 - ✅ 已檢查

### 頁面功能
- ✅ 首頁連結
- ✅ 課程連結
- ✅ 個人檔案連結
- ✅ 排行榜連結
- ✅ 獎勵任務連結
- ✅ 挑戰歷程連結
- ✅ 所有單元連結
- ✅ 挑戰地圖連結
- ✅ SOP 寶典連結
- ✅ 側邊欄收合/展開按鈕

### API 端點
無特定 API（純前端導航）

### 用戶流程
1. 點擊側邊欄選項導航到對應頁面
2. 側邊欄高亮當前頁面
3. 收合側邊欄節省空間

### 遺漏檢查
- ❌ 側邊欄狀態持久化（localStorage）
- ❌ 手機版側邊欄滑出功能

---

## 總結

### 已完成檢查的頁面
1. ✅ 首頁 (/) - 完整檢查（5 門課程、Banner、推廣區塊、社群連結）
2. ✅ 登入頁 (/sign-in) - 完整檢查
3. ✅ 課程列表頁 (/courses) - 完整檢查（5 門課程）
4. 🔄 課程詳情頁 (/journeys/[slug]) - 基本功能已檢查（需檢查 3 門新課程）
5. 🔄 個人檔案頁 (/users/me/profile) - 基本功能已檢查
6. ✅ 課程單元頁 (/journeys/[slug]/chapters/[id]/missions/[id]) - **完整檢查**（HLS 影片播放、進度追蹤）
7. ✅ 獎勵任務頁 (/journeys/[slug]/missions) - **完整檢查**（任務系統、段位鏈）
8. ✅ 挑戰地圖頁 (/journeys/[slug]/roadmap) - **完整檢查**（10 個道館、難度評級）
9. 🔒 SOP 寶典頁 (/journeys/[slug]/sop) - **需付費購買課程**
10. ⚠️ 道館挑戰頁 (/journeys/[slug]/chapters/[id]/gyms/[id]) - 可從地圖訪問（未直接測試）
11. ✅ 挑戰歷程頁 (/users/me/portfolio) - **完整檢查**（技能評級系統、6 項指標）
12. ✅ 排行榜頁 (/leaderboard) - 完整檢查
13. ✅ 技能評級及證書系統介紹頁 (/skills-intro) - **完整檢查**（教育頁面）
14. ✅ 頂部導航欄 - **完整檢查**（通知彈窗、用戶選單）
15. ✅ 側邊欄 - 完整檢查

### 付費限制功能
- 🔒 **SOP 寶典** - 需要購買「軟體設計模式精通之旅」課程才能訪問
- 頁面顯示：「您無法觀看『SOP 寶典』」
- 提示：「這是購買『軟體設計模式精通之旅』之後才能享有的內容。」

### 未完整檢查的頁面
1. ⚠️ 道館挑戰頁 - 可從挑戰地圖訪問，但未直接測試個別道館頁面
2. 🔄 課程詳情頁 - 需檢查 3 門新課程的詳情頁（ddd, software-design-talk, software-career）

### 新發現的 API 端點（2025-11-18）
✅ **已確認的新 API**：
- `GET /api/journeys/{id}/chapters/{chapterId}/lessons/{lessonId}` - 獲取課程單元詳情
- `GET /api/users/me/journeys/lessons/progresses` - 獲取所有課程進度
- `GET /api/users/me/items` - 獲取用戶物品/獎勵
- `GET /api/users/{userId}/journeys/missions/progresses` - 獲取任務進度
- `GET cdn.waterballsa.tw/.../videos/{videoId}/{videoId}.m3u8` - HLS 影片串流

⚠️ **推測存在的 API**：
- `POST /api/missions/{id}/accept` - 接受任務
- `POST /api/missions/{id}/progress` - 更新課程進度
- `POST /api/missions/{id}/deliver` - 完成課程
- `POST /api/gyms/{id}/submissions` - 提交道館作業
- `PUT /api/notifications/{id}/read` - 標記通知已讀

### 重要系統機制確認
✅ **技能評級系統**：
- 6 項技能指標
- F- 到（推測）A+ 評級
- 透過 20+ 場 Code Review 評估

✅ **任務系統**：
- 段位鏈：新手任務 → 白段任務 → 黑段任務
- 時間限制：21-30 天
- 獎勵類型：經驗值、訂閱延長

✅ **道館系統**：
- 10 個道館（白段 5 個、黑段 5 個）
- 難度等級：★ 到 ★★★★

✅ **影片播放**：
- HLS (HTTP Live Streaming) 協議
- 自適應位元率串流
- CDN 託管：cdn.waterballsa.tw

### 下一步行動（優先順序排序）
1. **高優先級**: 檢查 3 門新課程的詳情頁（ddd, software-design-talk, software-career）
2. **中優先級**: 直接測試道館挑戰頁面（從地圖進入）
3. **低優先級**: 測試付費購買流程以訪問 SOP 寶典
4. 驗證推測的 API 端點（需實際操作觸發）
5. 確認「SOP 寶典」vs「Prompt 寶典」官方術語

---

**文件版本**: v3.1
**最後更新**: 2025-11-18
**負責人**: Claude (基於 MCP Playwright 調查結果)
**更新記錄**:
- v1.0 (2025-11-18): 初始版本
- v2.0 (2025-11-18): 課程數量更新（2 門 → 5 門），更新頁面檢查狀態，新增 UI 功能，新增 /skills-intro 頁面
- v3.0 (2025-11-18): **完整檢查所有頁面**，確認 13 個頁面功能，發現 SOP 寶典付費限制，新增 5 個 API 端點，文檔化技能評級、任務、道館系統
- v3.1 (2025-11-18): 補充課程詳情頁檢查建議（其他 4 門課程），補充道館挑戰頁測試建議（白段/黑段道館直接測試）
